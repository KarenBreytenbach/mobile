'use strict';var $jscomp={scope:{},global:this},Symbol;$jscomp.initSymbol=function(){$jscomp.global.Symbol||(Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return"jscomp_symbol_"+a+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();Symbol.iterator||(Symbol.iterator=Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};
$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();if(a[Symbol.iterator])return a[Symbol.iterator]();if(!(a instanceof Array||"string"==typeof a||a instanceof String))throw new TypeError(a+" is not iterable");var b=0;return{next:function(){return b==a.length?{done:!0}:{done:!1,value:a[b++]}}}};$jscomp.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.arrayFromArguments=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b};$jscomp.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if($jscomp.global.Object.defineProperties){var f=$jscomp.global.Object.getOwnPropertyDescriptor(b,d);void 0!==f&&$jscomp.global.Object.defineProperty(a,d,f)}else a[d]=b[d]};var COMPILED=!0,goog=goog||{};goog.global=this;goog.isDef=function(a){return void 0!==a};
goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&goog.isDef(b)?c[d]=b:c=c[d]?c[d]:c[d]={}};
goog.define=function(a,b){var c=b;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,a)?c=goog.global.CLOSURE_UNCOMPILED_DEFINES[a]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(c=goog.global.CLOSURE_DEFINES[a]));goog.exportPath_(a,c)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.STRICT_MODE_COMPATIBLE=!1;goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG;
goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1;goog.provide=function(a){if(!COMPILED&&goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');goog.constructNamespace_(a)};goog.constructNamespace_=function(a,b){if(!COMPILED){delete goog.implicitNamespaces_[a];for(var c=a;(c=c.substring(0,c.lastIndexOf(".")))&&!goog.getObjectByName(c);)goog.implicitNamespaces_[c]=!0}goog.exportPath_(a,b)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(a){if(!goog.isString(a)||!a||-1==a.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+a+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=a;if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a]}};goog.module.get=function(a){return goog.module.getInternal_(a)};
goog.module.getInternal_=function(a){if(!COMPILED)return goog.isProvided_(a)?a in goog.loadedModules_?goog.loadedModules_[a]:goog.getObjectByName(a):null};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_};
goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0};
goog.setTestOnly=function(a){if(goog.DISALLOW_TEST_ONLY_CODE)throw a=a||"",Error("Importing test-only code into non-debug environment"+(a?": "+a:"."));};goog.forwardDeclare=function(a){};COMPILED||(goog.isProvided_=function(a){return a in goog.loadedModules_||!goog.implicitNamespaces_[a]&&goog.isDefAndNotNull(goog.getObjectByName(a))},goog.implicitNamespaces_={"goog.module":!0});
goog.getObjectByName=function(a,b){for(var c=a.split("."),d=b||goog.global,f;f=c.shift();)if(goog.isDefAndNotNull(d[f]))d=d[f];else return null;return d};goog.globalize=function(a,b){var c=b||goog.global,d;for(d in a)c[d]=a[d]};goog.addDependency=function(a,b,c,d){if(goog.DEPENDENCIES_ENABLED){var f;a=a.replace(/\\/g,"/");for(var e=goog.dependencies_,h=0;f=b[h];h++)e.nameToPath[f]=a,e.pathIsModule[a]=!!d;for(d=0;b=c[d];d++)a in e.requires||(e.requires[a]={}),e.requires[a][b]=!0}};
goog.ENABLE_DEBUG_LOADER=!0;goog.logToConsole_=function(a){goog.global.console&&goog.global.console.error(a)};goog.require=function(a){if(!COMPILED){goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(a);if(goog.isProvided_(a))return goog.isInModuleLoader_()?goog.module.getInternal_(a):null;if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b)return goog.writeScripts_(b),null}a="goog.require could not find: "+a;goog.logToConsole_(a);throw Error(a);}};
goog.basePath="";goog.nullFunction=function(){};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.LOAD_MODULE_USING_EVAL=!0;goog.SEAL_MODULE_EXPORTS=goog.DEBUG;goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return null!=a&&"write"in a},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("SCRIPT"),b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?"),d=-1==d?c.length:
d;if("base.js"==c.substr(d-7,7)){goog.basePath=c.substr(0,d-7);break}}},goog.importScript_=function(a,b){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(a,b)&&(goog.dependencies_.written[a]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.importModule_=function(a){goog.importScript_("",'goog.retrieveAndExecModule_("'+a+'");')&&(goog.dependencies_.written[a]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(a,b){return goog.LOAD_MODULE_USING_EVAL&&
goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(b+"\n//# sourceURL="+a+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+b+"\n;return exports});\n//# sourceURL="+a+"\n"},goog.loadQueuedModules_=function(){var a=goog.queuedModules_.length;if(0<a){var b=goog.queuedModules_;goog.queuedModules_=[];for(var c=0;c<a;c++)goog.maybeProcessDeferredPath_(b[c])}},goog.maybeProcessDeferredDep_=function(a){goog.isDeferredModule_(a)&&goog.allDepsAreAvailable_(a)&&(a=goog.getPathFromDeps_(a),
goog.maybeProcessDeferredPath_(goog.basePath+a))},goog.isDeferredModule_=function(a){return(a=goog.getPathFromDeps_(a))&&goog.dependencies_.pathIsModule[a]?goog.basePath+a in goog.dependencies_.deferred:!1},goog.allDepsAreAvailable_=function(a){if((a=goog.getPathFromDeps_(a))&&a in goog.dependencies_.requires)for(var b in goog.dependencies_.requires[a])if(!goog.isProvided_(b)&&!goog.isDeferredModule_(b))return!1;return!0},goog.maybeProcessDeferredPath_=function(a){if(a in goog.dependencies_.deferred){var b=
goog.dependencies_.deferred[a];delete goog.dependencies_.deferred[a];goog.globalEval(b)}},goog.loadModuleFromUrl=function(a){goog.retrieveAndExecModule_(a)},goog.loadModule=function(a){var b=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0,declareLegacyNamespace:!1};var c;if(goog.isFunction(a))c=a.call(goog.global,{});else if(goog.isString(a))c=goog.loadModuleFromSource_.call(goog.global,a);else throw Error("Invalid module definition");var d=goog.moduleLoaderState_.moduleName;
if(!goog.isString(d)||!d)throw Error('Invalid module name "'+d+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(d,c):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(c);goog.loadedModules_[d]=c}finally{goog.moduleLoaderState_=b}},goog.loadModuleFromSource_=function(a){eval(a);return{}},goog.writeScriptSrcNode_=function(a){goog.global.document.write('<script type="text/javascript" src="'+a+'">\x3c/script>')},goog.appendScriptSrcNode_=function(a){var b=goog.global.document,
c=b.createElement("script");c.type="text/javascript";c.src=a;c.defer=!1;c.async=!1;b.head.appendChild(c)},goog.writeScriptTag_=function(a,b){if(goog.inHtmlDocument_()){var c=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==c.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}var d=goog.IS_OLD_IE_;void 0===b?d?(d=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ",c.write('<script type="text/javascript" src="'+
a+'"'+d+">\x3c/script>")):goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(a):goog.writeScriptSrcNode_(a):c.write('<script type="text/javascript">'+b+"\x3c/script>");return!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(a,b){"complete"==a.readyState&&goog.lastNonModuleScriptIndex_==b&&goog.loadQueuedModules_();return!0},goog.writeScripts_=function(a){function b(a){if(!(a in f.written||a in f.visited)){f.visited[a]=!0;if(a in f.requires)for(var e in f.requires[a])if(!goog.isProvided_(e))if(e in
f.nameToPath)b(f.nameToPath[e]);else throw Error("Undefined nameToPath for "+e);a in d||(d[a]=!0,c.push(a))}}var c=[],d={},f=goog.dependencies_;b(a);for(a=0;a<c.length;a++){var e=c[a];goog.dependencies_.written[e]=!0}var h=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(a=0;a<c.length;a++)if(e=c[a])f.pathIsModule[e]?goog.importModule_(goog.basePath+e):goog.importScript_(goog.basePath+e);else throw goog.moduleLoaderState_=h,Error("Undefined script input");goog.moduleLoaderState_=h},goog.getPathFromDeps_=
function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));goog.normalizePath_=function(a){a=a.split("/");for(var b=0;b<a.length;)"."==a[b]?a.splice(b,1):b&&".."==a[b]&&a[b-1]&&".."!=a[b-1]?a.splice(--b,2):b++;return a.join("/")};
goog.loadFileSync_=function(a){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(a);var b=new goog.global.XMLHttpRequest;b.open("get",a,!1);b.send();return b.responseText};
goog.retrieveAndExecModule_=function(a){if(!COMPILED){var b=a;a=goog.normalizePath_(a);var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,d=goog.loadFileSync_(a);if(null!=d)d=goog.wrapModule_(a,d),goog.IS_OLD_IE_?(goog.dependencies_.deferred[b]=d,goog.queuedModules_.push(b)):c(a,d);else throw Error("load of "+a+"failed");}};
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval){if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),"undefined"!=typeof goog.global._evalTest_){try{delete goog.global._evalTest_}catch(d){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("SCRIPT");c.type="text/javascript";c.defer=!1;c.appendChild(b.createTextNode(a));
b.body.appendChild(c);b.body.removeChild(c)}}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var c=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(a){return a};return b?a+"-"+d(b):d(a)};
goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){b&&(a=a.replace(/\{\$([^}]+)}/g,function(a,d){return null!=b&&d in b?b[d]:a}));return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};
goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(a,c,e){for(var h=Array(arguments.length-2),l=2;l<arguments.length;l++)h[l-2]=arguments[l];return b.prototype[c].apply(a,h)}};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_){for(var f=Array(arguments.length-1),e=1;e<arguments.length;e++)f[e-1]=arguments[e];return d.superClass_.constructor.apply(a,f)}f=Array(arguments.length-2);for(e=2;e<arguments.length;e++)f[e-2]=arguments[e];for(var e=!1,h=a.constructor;h;h=
h.superClass_&&h.superClass_.constructor)if(h.prototype[b]===d)e=!0;else if(e)return h.prototype[b].apply(a,f);if(a[b]===d)return a.constructor.prototype[b].apply(a,f);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};COMPILED||(goog.global.COMPILED=COMPILED);
goog.defineClass=function(a,b){var c=b.constructor,d=b.statics;c&&c!=Object.prototype.constructor||(c=function(){throw Error("cannot instantiate an interface (no constructor defined).");});c=goog.defineClass.createSealingConstructor_(c,a);a&&goog.inherits(c,a);delete b.constructor;delete b.statics;goog.defineClass.applyProperties_(c.prototype,b);null!=d&&(d instanceof Function?d(c):goog.defineClass.applyProperties_(c,d));return c};goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG;
goog.defineClass.createSealingConstructor_=function(a,b){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(b&&b.prototype&&b.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return a;var c=function(){var b=a.apply(this,arguments)||this;b[goog.UID_PROPERTY_]=b[goog.UID_PROPERTY_];this.constructor===c&&Object.seal(b);return b};return c}return a};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
goog.defineClass.applyProperties_=function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);for(var d=0;d<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;d++)c=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[d],Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};goog.tagUnsealableClass=function(a){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";/*

 Copyright 2015 The AMP HTML Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS-IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the license.

 Credits:
   Copyright 2006-2008, The Google Caja project, licensed under the
   Apache License (http://code.google.com/p/google-caja/).
   Copyright 2009, The Closure Library Authors, licensed under the
   Apache License.
*/
var amp={htmlparser:{}};amp.htmlparser.HtmlSaxHandler=function(){};amp.htmlparser.HtmlSaxHandler.prototype.startTag=function(a,b){};amp.htmlparser.HtmlSaxHandler.prototype.endTag=function(a){};amp.htmlparser.HtmlSaxHandler.prototype.pcdata=function(a){};amp.htmlparser.HtmlSaxHandler.prototype.rcdata=function(a){};amp.htmlparser.HtmlSaxHandler.prototype.cdata=function(a){};amp.htmlparser.HtmlSaxHandler.prototype.startDoc=function(){};amp.htmlparser.HtmlSaxHandler.prototype.endDoc=function(){};
amp.htmlparser.DocLocator=function(){};amp.htmlparser.DocLocator.prototype.getLine=function(){};amp.htmlparser.DocLocator.prototype.getCol=function(){};amp.htmlparser.HtmlSaxHandlerWithLocation=function(){};$jscomp.inherits(amp.htmlparser.HtmlSaxHandlerWithLocation,amp.htmlparser.HtmlSaxHandler);amp.htmlparser.HtmlSaxHandlerWithLocation.prototype.setDocLocator=function(a){};amp.htmlparser.HtmlParser=function(){};
amp.htmlparser.HtmlParser.prototype.parse=function(a,b){var c=null,d=!1,f=[],e=void 0,h=void 0,l=void 0,k=null;a instanceof amp.htmlparser.HtmlSaxHandlerWithLocation&&(k=new amp.htmlparser.HtmlParser.DocLocatorImpl(b),a.setDocLocator(k));for(a.startDoc();b;){var g=b.match(d?amp.htmlparser.HtmlParser.INSIDE_TAG_TOKEN_:amp.htmlparser.HtmlParser.OUTSIDE_TAG_TOKEN_);k&&k.advancePos(g[0]);b=b.substring(g[0].length);if(d)if(g[1]){var m=amp.htmlparser.toLowerCase(g[1]),n=m;if(g[2]){g=g[3];switch(g.charCodeAt(0)){case 34:case 39:g=
g.substring(1,g.length-1)}n=this.unescapeEntities_(this.stripNULs_(g))}f.push(m,n)}else g[4]&&(void 0!==h&&(l?a.startTag&&a.startTag(e,f):a.endTag&&a.endTag(e)),l&&h&(amp.htmlparser.HtmlParser.EFlags.CDATA|amp.htmlparser.HtmlParser.EFlags.RCDATA)&&(c=null===c?amp.htmlparser.toLowerCase(b):c.substring(c.length-b.length),e=c.indexOf("</"+e),0>e&&(e=b.length),h&amp.htmlparser.HtmlParser.EFlags.CDATA?a.cdata&&a.cdata(b.substring(0,e)):a.rcdata&&a.rcdata(this.normalizeRCData_(b.substring(0,e))),k&&k.advancePos(b.substring(0,
e)),b=b.substring(e)),e=h=l=void 0,f.length=0,d&&k&&k.snapshotPos(),d=!1);else if(g[1])a.pcdata(g[0]);else if(g[3])l=!g[2],!d&&k&&k.snapshotPos(),d=!0,e=amp.htmlparser.toLowerCase(g[3]),h=amp.htmlparser.HtmlParser.Elements.hasOwnProperty(e)?amp.htmlparser.HtmlParser.Elements[e]:amp.htmlparser.HtmlParser.EFlags.UNKNOWN_OR_CUSTOM;else if(g[4])a.pcdata(g[4]);else if(g[5])switch(g[5]){case "<":a.pcdata("&lt;");break;case ">":a.pcdata("&gt;");break;default:a.pcdata("&amp;")}}!d&&k&&k.snapshotPos();a.endDoc()};
amp.htmlparser.HtmlParser.prototype.lookupEntity_=function(a){a=amp.htmlparser.toLowerCase(a.substring(1,a.length-1));if(amp.htmlparser.HtmlParser.Entities.hasOwnProperty(a))return amp.htmlparser.HtmlParser.Entities[a];var b=a.match(amp.htmlparser.HtmlParser.DECIMAL_ESCAPE_RE_);return b?String.fromCharCode(parseInt(b[1],10)):(b=a.match(amp.htmlparser.HtmlParser.HEX_ESCAPE_RE_))?String.fromCharCode(parseInt(b[1],16)):a};
amp.htmlparser.HtmlParser.prototype.stripNULs_=function(a){return a.replace(amp.htmlparser.HtmlParser.NULL_RE_,"")};amp.htmlparser.HtmlParser.prototype.unescapeEntities_=function(a){return a.replace(amp.htmlparser.HtmlParser.ENTITY_RE_,goog.bind(this.lookupEntity_,this))};amp.htmlparser.HtmlParser.prototype.normalizeRCData_=function(a){return a.replace(amp.htmlparser.HtmlParser.LOOSE_AMP_RE_,"&amp;$1").replace(amp.htmlparser.HtmlParser.LT_RE,"&lt;").replace(amp.htmlparser.HtmlParser.GT_RE,"&gt;")};
amp.htmlparser.HtmlParser.Entities={colon:":",lt:"<",gt:">",amp:"&",nbsp:"\u00a0",quot:'"',apos:"'"};amp.htmlparser.HtmlParser.EFlags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,UNKNOWN_OR_CUSTOM:64};
amp.htmlparser.HtmlParser.Elements={a:0,abbr:0,acronym:0,address:0,applet:amp.htmlparser.HtmlParser.EFlags.UNSAFE,area:amp.htmlparser.HtmlParser.EFlags.EMPTY,b:0,base:amp.htmlparser.HtmlParser.EFlags.EMPTY|amp.htmlparser.HtmlParser.EFlags.UNSAFE,basefont:amp.htmlparser.HtmlParser.EFlags.EMPTY|amp.htmlparser.HtmlParser.EFlags.UNSAFE,bdo:0,big:0,blockquote:0,body:amp.htmlparser.HtmlParser.EFlags.OPTIONAL_ENDTAG|amp.htmlparser.HtmlParser.EFlags.UNSAFE|amp.htmlparser.HtmlParser.EFlags.FOLDABLE,br:amp.htmlparser.HtmlParser.EFlags.EMPTY,
button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:amp.htmlparser.HtmlParser.EFlags.EMPTY,colgroup:amp.htmlparser.HtmlParser.EFlags.OPTIONAL_ENDTAG,dd:amp.htmlparser.HtmlParser.EFlags.OPTIONAL_ENDTAG,del:0,dfn:0,dir:0,div:0,dl:0,dt:amp.htmlparser.HtmlParser.EFlags.OPTIONAL_ENDTAG,em:0,fieldset:0,font:0,form:0,frame:amp.htmlparser.HtmlParser.EFlags.EMPTY|amp.htmlparser.HtmlParser.EFlags.UNSAFE,frameset:amp.htmlparser.HtmlParser.EFlags.UNSAFE,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:amp.htmlparser.HtmlParser.EFlags.OPTIONAL_ENDTAG|
amp.htmlparser.HtmlParser.EFlags.UNSAFE|amp.htmlparser.HtmlParser.EFlags.FOLDABLE,hr:amp.htmlparser.HtmlParser.EFlags.EMPTY,html:amp.htmlparser.HtmlParser.EFlags.OPTIONAL_ENDTAG|amp.htmlparser.HtmlParser.EFlags.UNSAFE|amp.htmlparser.HtmlParser.EFlags.FOLDABLE,i:0,iframe:amp.htmlparser.HtmlParser.EFlags.UNSAFE|amp.htmlparser.HtmlParser.EFlags.CDATA,img:amp.htmlparser.HtmlParser.EFlags.EMPTY,input:amp.htmlparser.HtmlParser.EFlags.EMPTY,ins:0,isindex:amp.htmlparser.HtmlParser.EFlags.EMPTY|amp.htmlparser.HtmlParser.EFlags.UNSAFE,
kbd:0,label:0,legend:0,li:amp.htmlparser.HtmlParser.EFlags.OPTIONAL_ENDTAG,link:amp.htmlparser.HtmlParser.EFlags.EMPTY|amp.htmlparser.HtmlParser.EFlags.UNSAFE,map:0,menu:0,meta:amp.htmlparser.HtmlParser.EFlags.EMPTY|amp.htmlparser.HtmlParser.EFlags.UNSAFE,noframes:amp.htmlparser.HtmlParser.EFlags.UNSAFE|amp.htmlparser.HtmlParser.EFlags.CDATA,noscript:amp.htmlparser.HtmlParser.EFlags.UNSAFE,object:amp.htmlparser.HtmlParser.EFlags.UNSAFE,ol:0,optgroup:0,option:amp.htmlparser.HtmlParser.EFlags.OPTIONAL_ENDTAG,
p:amp.htmlparser.HtmlParser.EFlags.OPTIONAL_ENDTAG,param:amp.htmlparser.HtmlParser.EFlags.EMPTY|amp.htmlparser.HtmlParser.EFlags.UNSAFE,pre:0,q:0,s:0,samp:0,script:amp.htmlparser.HtmlParser.EFlags.UNSAFE|amp.htmlparser.HtmlParser.EFlags.CDATA,select:0,small:0,span:0,strike:0,strong:0,style:amp.htmlparser.HtmlParser.EFlags.UNSAFE|amp.htmlparser.HtmlParser.EFlags.CDATA,sub:0,sup:0,table:0,tbody:amp.htmlparser.HtmlParser.EFlags.OPTIONAL_ENDTAG,td:amp.htmlparser.HtmlParser.EFlags.OPTIONAL_ENDTAG,textarea:amp.htmlparser.HtmlParser.EFlags.RCDATA,
tfoot:amp.htmlparser.HtmlParser.EFlags.OPTIONAL_ENDTAG,th:amp.htmlparser.HtmlParser.EFlags.OPTIONAL_ENDTAG,thead:amp.htmlparser.HtmlParser.EFlags.OPTIONAL_ENDTAG,title:amp.htmlparser.HtmlParser.EFlags.RCDATA|amp.htmlparser.HtmlParser.EFlags.UNSAFE,tr:amp.htmlparser.HtmlParser.EFlags.OPTIONAL_ENDTAG,tt:0,u:0,ul:0,"var":0};amp.htmlparser.HtmlParser.AMP_RE=/&/g;amp.htmlparser.HtmlParser.LOOSE_AMP_RE_=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi;amp.htmlparser.HtmlParser.LT_RE=/</g;
amp.htmlparser.HtmlParser.GT_RE=/>/g;amp.htmlparser.HtmlParser.QUOTE_RE=/\"/g;amp.htmlparser.HtmlParser.EQUALS_RE=/=/g;amp.htmlparser.HtmlParser.NULL_RE_=/\0/g;amp.htmlparser.HtmlParser.ENTITY_RE_=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g;amp.htmlparser.HtmlParser.DECIMAL_ESCAPE_RE_=/^#(\d+)$/;amp.htmlparser.HtmlParser.HEX_ESCAPE_RE_=/^#x([0-9A-Fa-f]+)$/;amp.htmlparser.HtmlParser.INSIDE_TAG_TOKEN_=/^\s*(?:(?:([^\t\r\n /=>][^\t\r\n =>]*)(\s*=\s*("[^"]*"|'[^']*'|(?=[a-z][a-z-]*\s*=)|[^>"'\s]*))?)|(\/?>)|[^a-z\s>]+)/i;
amp.htmlparser.HtmlParser.OUTSIDE_TAG_TOKEN_=/^(?:&(\#[0-9]+|\#[x][0-9a-f]+|\w+);|<[!]--[\s\S]*?--\x3e|<\?[^>*]*>|<(\/)?([a-z!][a-z0-9_-]*)|([^<&>]+)|([<&>]))/i;amp.htmlparser.HtmlParser.DocLocatorImpl=function(a){this.lineByPos_=[];this.colByPos_=[];for(var b=1,c=0,d=0;d<a.length;++d)this.lineByPos_[d]=b,this.colByPos_[d]=c,"\n"==a.charAt(d)?(++b,c=0):++c;this.previousPos_=this.pos_=0;this.line_=1;this.col_=0};$jscomp.inherits(amp.htmlparser.HtmlParser.DocLocatorImpl,amp.htmlparser.DocLocator);
amp.htmlparser.HtmlParser.DocLocatorImpl.prototype.advancePos=function(a){this.previousPos_=this.pos_;this.pos_+=a.length};amp.htmlparser.HtmlParser.DocLocatorImpl.prototype.snapshotPos=function(){this.previousPos_<this.lineByPos_.length&&(this.line_=this.lineByPos_[this.previousPos_],this.col_=this.colByPos_[this.previousPos_])};amp.htmlparser.HtmlParser.DocLocatorImpl.prototype.getLine=function(){return this.line_};amp.htmlparser.HtmlParser.DocLocatorImpl.prototype.getCol=function(){return this.col_};
amp.htmlparser.toLowerCase=function(a){var b=a.toLowerCase();return b.length==a.length?b:a.replace(/[A-Z]/g,function(a){return String.fromCharCode(a.charCodeAt(0)|32)})};amp.htmlparser.HtmlParserTest={};var LoggingHandler=function(){this.log=[]};$jscomp.inherits(LoggingHandler,amp.htmlparser.HtmlSaxHandler);LoggingHandler.prototype.startDoc=function(){this.log.push("startDoc()")};LoggingHandler.prototype.cdata=function(a){this.log.push('cdata("'+a+'")')};LoggingHandler.prototype.pcdata=function(a){this.log.push('pcdata("'+a+'")')};LoggingHandler.prototype.rcdata=function(a){this.log.push('rcdata("'+a+'")')};LoggingHandler.prototype.endDoc=function(){this.log.push("endDoc()")};
LoggingHandler.prototype.startTag=function(a,b){this.log.push("startTag("+a+",["+b+"])")};LoggingHandler.prototype.endTag=function(a){this.log.push("endTag("+a+")")};
describe("HtmlParser",function(){it("parses basic text",function(){var a=new LoggingHandler;(new amp.htmlparser.HtmlParser).parse(a,"hello world");expect(a.log).toEqual(["startDoc()",'pcdata("hello world")',"endDoc()"])});it("parses image tag",function(){var a=new LoggingHandler;(new amp.htmlparser.HtmlParser).parse(a,'<img src="hello.gif">');expect(a.log).toEqual(["startDoc()","startTag(img,[src,hello.gif])","endDoc()"])});it("parses tags inside tags",function(){var a=new LoggingHandler;(new amp.htmlparser.HtmlParser).parse(a,
"<div><span>hello world</span></div>");expect(a.log).toEqual('startDoc();startTag(div,[]);startTag(span,[]);pcdata("hello world");endTag(span);endTag(div);endDoc()'.split(";"))});it("parses tag with multiple attrs",function(){var a=new LoggingHandler;(new amp.htmlparser.HtmlParser).parse(a,'<img src="hello.gif" width="400px">');expect(a.log).toEqual(["startDoc()","startTag(img,[src,hello.gif,width,400px])","endDoc()"])});it("parses tag with boolean attr",function(){var a=new LoggingHandler;(new amp.htmlparser.HtmlParser).parse(a,
"<input type=checkbox checked>");expect(a.log).toEqual(["startDoc()","startTag(input,[type,checkbox,checked,checked])","endDoc()"])});it("parses unclosed tag",function(){var a=new LoggingHandler;(new amp.htmlparser.HtmlParser).parse(a,"<span>");expect(a.log).toEqual(["startDoc()","startTag(span,[])","endDoc()"])});it("parses style tag",function(){var a=new LoggingHandler;(new amp.htmlparser.HtmlParser).parse(a,'<span style="background-color: black;"></span>');expect(a.log).toEqual(["startDoc()","startTag(span,[style,background-color: black;])",
"endTag(span)","endDoc()"])});it("parses cdata",function(){var a=new LoggingHandler;(new amp.htmlparser.HtmlParser).parse(a,'<script><![CDATA[alert("hey");]]\x3e\x3c/script>');expect(a.log).toEqual(["startDoc()","startTag(script,[])",'cdata("<![CDATA[alert("hey");]]\x3e")',"endTag(script)","endDoc()"])});it("parses several tags on the same level",function(){var a=new LoggingHandler;(new amp.htmlparser.HtmlParser).parse(a,"<img><p>hello<img><div/></p>");expect(a.log).toEqual('startDoc() startTag(img,[]) startTag(p,[]) pcdata("hello") startTag(img,[]) startTag(div,[]) endTag(p) endDoc()'.split(" "))});
it("will not hold state between two parse calls",function(){var a=new LoggingHandler,b=new amp.htmlparser.HtmlParser;b.parse(a,"<div/>");b.parse(a,"<div/>");expect(a.log).toEqual("startDoc() startTag(div,[]) endDoc() startDoc() startTag(div,[]) endDoc()".split(" "))});it("skips over comments",function(){var a=new LoggingHandler;(new amp.htmlparser.HtmlParser).parse(a,"<div>\x3c!-- this is a comment --\x3e</div>");expect(a.log).toEqual(["startDoc()","startTag(div,[])","endTag(div)","endDoc()"])});
it("processes unknown or custom tags",function(){var a=new LoggingHandler;(new amp.htmlparser.HtmlParser).parse(a,'<a-tag><more-tags><custom foo="Hello">world.</more-tags></a-tag>');expect(a.log).toEqual('startDoc() startTag(a-tag,[]) startTag(more-tags,[]) startTag(custom,[foo,Hello]) pcdata("world.") endTag(more-tags) endTag(a-tag) endDoc()'.split(" "))});it("parses oddly formatted attributes",function(){var a=new LoggingHandler;(new amp.htmlparser.HtmlParser).parse(a,'<a href="foo.html""></a>');
expect(a.log).toEqual(["startDoc()",'startTag(a,[href,foo.html,","])',"endTag(a)","endDoc()"])})});var LoggingHandlerWithLocation=function(){this.locator=null;this.log=[]};$jscomp.inherits(LoggingHandlerWithLocation,amp.htmlparser.HtmlSaxHandlerWithLocation);LoggingHandlerWithLocation.prototype.setDocLocator=function(a){this.locator=a;this.log=[]};LoggingHandlerWithLocation.prototype.startDoc=function(){this.log.push(":"+this.locator.getLine()+":"+this.locator.getCol()+": startDoc()")};
LoggingHandlerWithLocation.prototype.cdata=function(a){this.log.push(":"+this.locator.getLine()+":"+this.locator.getCol()+': cdata("'+a+'")')};LoggingHandlerWithLocation.prototype.pcdata=function(a){this.log.push(":"+this.locator.getLine()+":"+this.locator.getCol()+': pcdata("'+a+'")')};LoggingHandlerWithLocation.prototype.rcdata=function(a){this.log.push(":"+this.locator.getLine()+":"+this.locator.getCol()+': rcdata("'+a+'")')};
LoggingHandlerWithLocation.prototype.endDoc=function(){this.log.push(":"+this.locator.getLine()+":"+this.locator.getCol()+": endDoc()")};LoggingHandlerWithLocation.prototype.startTag=function(a,b){this.log.push(":"+this.locator.getLine()+":"+this.locator.getCol()+": startTag("+a+",["+b+"])")};LoggingHandlerWithLocation.prototype.endTag=function(a){this.log.push(":"+this.locator.getLine()+":"+this.locator.getCol()+": endTag("+a+")")};
describe("HtmlParser with location",function(){it("reports line and column",function(){var a=new LoggingHandlerWithLocation;(new amp.htmlparser.HtmlParser).parse(a,"<html>\n  <body>\n    <div style=foo>Oh hi!</div>\n  </body>\n</html>");expect(a.log).toEqual(':1:0: startDoc();:1:0: startTag(html,[]);:1:5: pcdata("\n  ");:2:2: startTag(body,[]);:2:7: pcdata("\n    ");:3:4: startTag(div,[style,foo]);:3:18: pcdata("Oh hi!");:3:25: endTag(div);:3:30: pcdata("\n  ");:4:2: endTag(body);:4:8: pcdata("\n");:5:0: endTag(html);:5:6: endDoc()'.split(";"))});
it("does not insert closing events as html5 standard would suggest",function(){var a=new LoggingHandlerWithLocation;(new amp.htmlparser.HtmlParser).parse(a,"<html>\n  <body>\n    <p>\n      <a-custom>\n        <div style=foo>Oh hi!</div>\n      </a-custom>\n    </p>\n  </body>\n</html>");expect(a.log).toEqual(':1:0: startDoc();:1:0: startTag(html,[]);:1:5: pcdata("\n  ");:2:2: startTag(body,[]);:2:7: pcdata("\n    ");:3:4: startTag(p,[]);:3:6: pcdata("\n      ");:4:6: startTag(a-custom,[]);:4:15: pcdata("\n        ");:5:8: startTag(div,[style,foo]);:5:22: pcdata("Oh hi!");:5:29: endTag(div);:5:34: pcdata("\n      ");:6:6: endTag(a-custom);:6:16: pcdata("\n    ");:7:4: endTag(p);:7:7: pcdata("\n  ");:8:2: endTag(body);:8:8: pcdata("\n");:9:0: endTag(html);:9:6: endDoc()'.split(";"))});
it("tracks line and column past complex cdata sections",function(){var a=new LoggingHandlerWithLocation;(new amp.htmlparser.HtmlParser).parse(a,'<html>\n<body>\n<script type="application/json">\n{\n"vars": {\n"account": "UA-XXXX-Y"\n},\n"triggers": {\n"default pageview": {\n"on": "visible"\n}\n}\n}\n\x3c/script>\n<amp-analytics></amp-analytics>\n</body>\n</html>');expect(a.log).toEqual(':1:0: startDoc();:1:0: startTag(html,[]);:1:5: pcdata("\n");:2:0: startTag(body,[]);:2:5: pcdata("\n");:3:0: startTag(script,[type,application/json]);:3:0: cdata("\n{\n"vars": {\n"account": "UA-XXXX-Y"\n},\n"triggers": {\n"default pageview": {\n"on": "visible"\n}\n}\n}\n");:14:0: endTag(script);:14:8: pcdata("\n");:15:0: startTag(amp-analytics,[]);:15:15: endTag(amp-analytics);:15:30: pcdata("\n");:16:0: endTag(body);:16:6: pcdata("\n");:17:0: endTag(html);:17:6: endDoc()'.split(";"))});
it("Supports Turkish UTF8 \u0130 character in body",function(){var a=new LoggingHandlerWithLocation;(new amp.htmlparser.HtmlParser).parse(a,'<!doctype html>\n<html amp lang="tr">\n<head>\n<meta charset="utf-8">\n<title></title>\n<script async src="https://cdn.ampproject.org/v0.js">\x3c/script>\n</head>\n<body>\u0130</body>\n</html>');expect(a.log).toEqual(':1:0: startDoc();:1:0: startTag(!doctype,[html,html]);:1:14: pcdata("\n");:2:0: startTag(html,[amp,amp,lang,tr]);:2:19: pcdata("\n");:3:0: startTag(head,[]);:3:5: pcdata("\n");:4:0: startTag(meta,[charset,utf-8]);:4:21: pcdata("\n");:5:0: startTag(title,[]);:5:0: rcdata("");:5:7: endTag(title);:5:14: pcdata("\n");:6:0: startTag(script,[async,async,src,https://cdn.ampproject.org/v0.js]);:6:0: cdata("");:6:53: endTag(script);:6:61: pcdata("\n");:7:0: endTag(head);:7:6: pcdata("\n");:8:0: startTag(body,[]);:8:5: pcdata("\u0130");:8:7: endTag(body);:8:13: pcdata("\n");:9:0: endTag(html);:9:6: endDoc()'.split(";"))})});
